Revised from original.

diff -up krb5/src/kdc/do_as_req.c krb5/src/kdc/do_as_req.c
--- krb5/src/kdc/do_as_req.c	2011-02-24 17:23:28.618610056 -0500
+++ krb5/src/kdc/do_as_req.c	2011-02-24 17:25:43.671609998 -0500
@@ -741,6 +741,8 @@ prepare_error_as (struct kdc_request_sta
                     pad->contents = td[size]->data;
                     pad->length = td[size]->length;
                     pa[size] = pad;
+                    td[size]->data = NULL;
+                    td[size]->length = 0;
                 }
             krb5_free_typed_data(kdc_context, td);
         }
